<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
    xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:p="http://primefaces.org/ui">

     <div class="container-fluid innerMNU innerTopo">

                <ul class="nav pull-left">
                    <li class="active"><p:commandLink id="btnHome" action="pretty:home">
                            <p:graphicImage cache="true" library="imagens" name="home-menu.png" width="16" height="16"/>
                        </p:commandLink>
                    </li>
                    <!-- MENU TREINO  -->
                    <ui:fragment rendered="#{!SuperControl.moduloAula}">
                        <li class="dropdown">
                            <ui:fragment rendered="#{SuperControl.usuario.cadastroHabilitado}">
                                <a class="dropdown-toggle" data-toggle="dropdown" id="btnCadastros" href="#">#{title['principal.cadastros']}</a>
                            </ui:fragment>
                            <ul class="dropdown-menu drop-sub">
                                <ui:fragment rendered="#{SuperControl.usuario.isItemHabilitado('MUSCULOS', 'CONSULTAR')}">
                                    <li><h:commandLink id="btnCadastrosMusculos" action="pretty:musculo">#{title['cadastros.musculos']}</h:commandLink></li>
                                </ui:fragment>
                                <ui:fragment rendered="#{SuperControl.usuario.isItemHabilitado('GRUPOS_MUSCULARES', 'CONSULTAR')}">
                                    <li><h:commandLink id="btnCadastrosGruposMusculares" action="pretty:gmusculo">#{title['cadastros.gruposmusculares']}</h:commandLink></li>
                                </ui:fragment>
                                <ui:fragment rendered="#{SuperControl.usuario.isItemHabilitado('APARELHOS', 'CONSULTAR')}">
                                    <li><h:commandLink id="btnCadastrosAparelhos" action="pretty:aparelhos">#{title['cadastros.aparelhos']}</h:commandLink></li>
                                </ui:fragment>
                                <ui:fragment rendered="#{SuperControl.usuario.isItemHabilitado('CATEGORIA_ATIVIDADE', 'CONSULTAR')}">
                                    <li><h:commandLink id="btnCadastrosCategoriaDeAtividades" action="pretty:catatividades">#{title['cadastros.categoriaAtividades']}</h:commandLink></li>
                                </ui:fragment>
                                <ui:fragment rendered="#{SuperControl.usuario.isItemHabilitado('NIVEIS', 'CONSULTAR')}">
                                    <li><h:commandLink id="btnCadastrosNiveis" action="pretty:nivel">#{title['cadastros.nivel']}</h:commandLink></li>
                                </ui:fragment>
                                <ui:fragment rendered="#{SuperControl.usuario.isItemHabilitado('ATIVIDADES', 'CONSULTAR')}">
                                    <li><h:commandLink id="btnCadastrosAtividades" action="pretty:atividades">#{title['cadastros.atividades']}</h:commandLink></li>
                                </ui:fragment>
                                <ui:fragment rendered="#{SuperControl.usuario.isItemHabilitado('FICHAS_PRE_DEFINIDAS', 'CONSULTAR')}">
                                    <li><h:commandLink id="btnCadastrosFichasPredefinidas" action="#{SuperControl.redirect('/cadastros/fichas/predefinidas')}">#{title['cadastros.fichas.predefinidas']}</h:commandLink></li>
                                </ui:fragment>
                                <ui:fragment rendered="#{SuperControl.usuario.isItemHabilitado('CATEGORIA_FICHAS', 'CONSULTAR')}">
                                    <li><h:commandLink id="btnCadastrosCategoriasDeFichas" action="pretty:catfichas">#{title['cadastros.categoriaficha']}</h:commandLink></li>
                                </ui:fragment>
                                <ui:fragment rendered="#{SuperControl.usuario.isItemHabilitado('OBJETIVOS', 'CONSULTAR')}">
                                    <li><h:commandLink id="btnCadastrosObjetivosPredefinidos" action="pretty:objetivos">#{title['cadastros.objetivos']}</h:commandLink></li>
                                </ui:fragment>
                                <ui:fragment rendered="#{SuperControl.usuario.isItemHabilitado('IMAGENS', 'CONSULTAR')}">
                                    <li><h:commandLink id="btnCadastrosImagens" action="pretty:imagem">#{title['cadastros.imagens']}</h:commandLink></li>
                                </ui:fragment>
                                <ui:fragment rendered="#{SuperControl.usuario.isItemHabilitado('BADGES', 'CONSULTAR')}">
                                    <li><h:commandLink id="btnCadastrosBadges" action="pretty:badge">#{title['badge']}</h:commandLink></li>
                                </ui:fragment>
                                <ui:fragment rendered="#{SuperControl.usuario.isItemHabilitado('TIPO_EVENTO', 'CONSULTAR')}">
                                    <li><h:commandLink id="btnCadastrosTiposDeEventos" action="pretty:tiposEvento">#{title['cadastros.tipoEvento']}</h:commandLink></li>
                                </ui:fragment>
                            </ul>
                        </li>
                        <ui:fragment rendered="#{SuperControl.usuario.isItemHabilitado('GESTAO', 'CONSULTAR')}">
                            <li class="dropdown">
                                <a class="dropdown-toggle" data-toggle="dropdown"  id="btnGestao" href="#">#{title['principal.gestao']}</a>
                                <ul class="dropdown-menu drop-sub">
                                    <li><h:commandLink action="pretty:gestao">#{title['AGENDA']}</h:commandLink></li>
                                    <li><h:commandLink action="#{SuperControl.redirect('/gestao/carteiras')}">#{title['carteiras']}</h:commandLink></li>
                                    <li><h:commandLink action="#{SuperControl.redirect('/gestao/atividades')}">#{title['atividadesProfessores']}</h:commandLink></li>
                                    <li><h:commandLink action="#{SuperControl.redirect('/gestaoNotificacoes/notificacoes')}">#{title['principal.notificacoes']}</h:commandLink></li>
                                </ul>
                            </li>
                        </ui:fragment>
                        <ui:fragment rendered="#{SuperControl.usuario.isItemHabilitado('ALUNOS', 'CONSULTAR')}">
                            <li><h:commandLink id="btnAlunos" action="#{SuperControl.redirect('/alunos/todosalunos')}">#{title['cadastros.todosalunos']}</h:commandLink></li>
                        </ui:fragment>

                        <ui:fragment>
                            <li class="">
                                <h:commandLink id="btnAgenda" target="#{MenuControle.getConfig('AGENDA_NOVA_ABA').valorAsBoolean ? 'myAgenda' : '_self'}"
                                               action="pretty:agenda">#{title['principal.agenda']}</h:commandLink>
                            </li>
                        </ui:fragment>

                        <ui:fragment rendered="#{SuperControl.usuario.isItemHabilitado('NOTIFICACOES', 'CONSULTAR')}">
                            <li><h:link id="btnNotificacoes" outcome="notificacoes">
                                    #{title['principal.notificacoes']}
                                    <f:param name="op" value="listarTodas"/>
                                </h:link>
                            </li>
                        </ui:fragment>

                        <ui:fragment rendered="#{SuperControl.usuario.isItemHabilitado('ACOMPANHAR', 'CONSULTAR')}">
                            <li class=""><h:commandLink id="btnAcompanhar" action="pretty:acompanhar">Acompanhar</h:commandLink></li>
                        </ui:fragment>

                        <ui:fragment rendered="#{SuperControl.usarGestaoCreditoPersonal}">
                            <li class="dropdown">
                                <a id="btnGestaoDePersonal" class="dropdown-toggle" data-toggle="dropdown" href="#">#{title['gestaopersonal']}</a>
                                <ul class="dropdown-menu drop-sub">
                                    <ui:fragment rendered="#{SuperControl.usuario.isFuncionalidadeHabilitado('GESTAO_PERSONAL')}">
                                        <li class=""><h:commandLink action="pretty:personal">#{title['personais']}</h:commandLink></li>
                                    </ui:fragment>

                                    <ui:fragment rendered="#{SuperControl.usuario.isFuncionalidadeHabilitado('ACOMPANHAR_PERSONAL')}">
                                        <li class=""><h:commandLink action="pretty:acompanharpersonal">#{title['acompanhar_personal']}</h:commandLink></li>
                                    </ui:fragment>

                                    <ui:fragment rendered="#{SuperControl.usuario.isFuncionalidadeHabilitado('GESTAO_CREDITOS_PERSONAL')}">
                                        <li class=""><h:commandLink action="pretty:gestaopersonal">#{title['cadastros.gestaocreditos']}</h:commandLink></li>
                                    </ui:fragment>

                                    <ui:fragment rendered="#{SuperControl.usuario.isItemHabilitado('COLABORADORES', 'CONSULTAR')}">
                                        <li><h:commandLink action="pretty:colaboradores">#{title['colaboradores']}</h:commandLink></li>
                                    </ui:fragment>
                                </ul>
                            </li>
                        </ui:fragment>
                    </ui:fragment>

                    <!-- MENU AULA  -->
                    <ui:fragment rendered="#{SuperControl.moduloAula}">
                        <li class="dropdown">
                            <ui:fragment rendered="#{SuperControl.usuario.cadastroHabilitado}">
                                <a class="dropdown-toggle" data-toggle="dropdown" href="#">#{title['principal.cadastros']}</a>
                            </ui:fragment>
                            <ul class="dropdown-menu drop-sub">
                                <ui:fragment rendered="#{SuperControl.usuario.isItemHabilitado('CADASTRO_AULAS', 'CONSULTAR')}">
                                    <li><h:commandLink action="pretty:aulas">#{title['cadastro.aulas']}



                                    </h:commandLink>
                                    </li>
                                </ui:fragment>
                                <ui:fragment rendered="true">
                                    <li><h:commandLink action="pretty:modalidades">Modalidades



                                    </h:commandLink></li>
                                    <li><h:commandLink action="pretty:ambientes">Ambientes



                                    </h:commandLink></li>
                                </ui:fragment>
                                <ui:fragment rendered="#{SuperControl.usuario.isItemHabilitado('ALUNOS', 'CONSULTAR')}">
                                    <li><h:commandLink action="#{SuperControl.redirect('/alunos/todosalunos')}">#{title['cadastros.todosalunos']}



                                    </h:commandLink></li>
                                </ui:fragment>
                                <li><h:commandLink action="pretty:colaboradores">#{title['colaboradores']}



                                </h:commandLink></li>
                            </ul>
                        </li>
                        <li><h:commandLink action="pretty:agendaAulas">Agenda</h:commandLink></li>
                        <ui:fragment rendered="#{!fn:endsWith(request.requestURI, 'gestaoSalaCheia.xhtml') and SuperControl.usuario.isItemHabilitado('GESTAO_AULA_CHEIA', 'CONSULTAR') and !fn:endsWith(request.requestURI, 'gestaoAulaCheiaAnalitico.xhtml')}">
                            <li><h:commandLink action="pretty:gestaoSalaCheia">Business Intelligence</h:commandLink></li>
                        </ui:fragment>
                        <ui:fragment rendered="#{fn:endsWith(request.requestURI, 'gestaoSalaCheia.xhtml') or fn:endsWith(request.requestURI, 'gestaoAulaCheiaAnalitico.xhtml')}">
                            <li class="dropdown open">
                                <ui:fragment rendered="#{true}">
                                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">Business Intelligence</a>
                                </ui:fragment>
                                <ul class="dropdown-menu drop-sub">
                                    <li><h:commandLink action="pretty:gestaoSalaCheia">Gráficos</h:commandLink></li>
                                    <li><h:commandLink action="#{SuperControl.redirect('/bonificacao/professor')}">Bonificação</h:commandLink></li>
                                    <li><h:commandLink action="#{SuperControl.redirect('/substituidos/professoressubstituidos')}">Professores substituídos</h:commandLink></li>
                                </ul>
                            </li>
                        </ui:fragment>
                    </ui:fragment>
                </ul>

                <h:panelGroup layout="block" class="pesq pesq-alunos-topo #{not empty ClientesControle.filtroPesquisa ? 'expandido' : ''} pull-right">
                    <label>
                        <p:inputText title="#{title['pesquisaGeralAluno']}" id="inputPesquisaGeral" pt:placeholder="#{title['principal.pesquisa']}" 
                                     value="#{ClientesControle.filtroPesquisa}"                                     
                                     onblur="if ($('div.pesq > input').text() === '') {
                                    $('.expandido').removeClass('expandido');
                                }"
                                     onclick="this.select()"
                                     onkeypress="if (event.keyCode === 13) {
                                    document.getElementById('fmLay:btnConsultarGeral').click();
                                    return false;
                                }">

                        </p:inputText>
                        <p:hotkey global="false" bind="ctrl+shift+l" onsuccess="document.getElementById('fmLay:inputPesquisaGeral').focus();"/>
                        <p:commandLink id="btnConsultarGeral"
                                       style="display: none;"
                                       update="@(.pesq)"
                                       actionListener="#{ClientesControle.redirectConsulta}"/>
                    </label>
                </h:panelGroup>
            </div>
    
</ui:composition>
