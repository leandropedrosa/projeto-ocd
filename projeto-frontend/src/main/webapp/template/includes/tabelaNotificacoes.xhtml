<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <style type="text/css">
        .scrollAlterado{ overflow:scroll; } /* limitando altura do box */
        .scrollAlterado::-webkit-scrollbar { width:15px; background:#e3e0d6; } /* configurando scroll */
        .scrollAlterado::-webkit-scrollbar-track {  background-color: #EEE;; }
        .scrollAlterado::-webkit-scrollbar-thumb { border-radius:10px; background:#8b8778;  }
        .scrollAlterado::-webkit-scrollbar-thumb{
            border-radius: 0px;
            border: none;
            height: 30px;
            background-color: #333;
        }
        .popDoRodape .contemTabelaNotifica, .popDoRodape .contemTabelaAcomp, .scrollAlterado{
            width: 50vw !important;
        }

    </style>
    <c:set var="telaAluno" value="#{fn:endsWith(request.requestURI, 'aluno.xhtml')}" scope="view"/>
    <ui:fragment rendered="#{!(NotificacaoControle.mostrarData)}">
        <!--<h:panelGroup layout="block" style="width: 675px;height: 48px;background-color: #dbdbdb;vertical-align: middle;" rendered="#{empty NotificacaoControle.notificacoes}">-->
               <!--<div style="padding-top: 12px;padding-left:3px">#{msg['tabela.semregistros']}</div>-->
        <!--</h:panelGroup>-->
        <h:panelGroup styleClass="scrollAlterado" layout="block" style="max-height:200px;overflow-y: auto;overflow-x: hidden;">
        <p:dataTable var="notificacao" value="#{NotificacaoControle.notificacoes}" id="listaNotfRodape"
                    emptyMessage="#{msg['tabela.semregistros']}"  styleClass="tabelaScrollNotificacao"
                     style="width: 100%"
                     rowStyleClass="#{notificacao.tipo.style}">
            <p:column headerText="Notificação" styleClass="linhaNotifica">
                <p:commandLink action="#{NotificacaoControle.redirect(('/aluno/').concat(notificacao.cliente.codigo))}">
                    <h:graphicImage width="48" height="48" library="img"
                                    name="#{SuperControl.defineUrlFoto(SuperControl.usuario.chave, notificacao.cliente.codigoPessoa, false)}"/>
                    <h:outputText value="#{notificacao.cliente.nomeAbreviado} "/>
                    <h:outputText style="font-weight: bold" value="#{notificacao.nome}"/>
                    <ui:fragment rendered="#{notificacao.serieRealizada != null}">
                        <h:outputText value=" da atividade "/>
                        <h:outputText style="font-weight: bold"
                                      value="#{notificacao.serieRealizada.atividadeFicha.atividade.nome}"/>
                    </ui:fragment>
                </p:commandLink>
            </p:column>            
        </p:dataTable>
        </h:panelGroup>
    </ui:fragment>
    <ui:fragment rendered="#{NotificacaoControle.mostrarData}">
        <p:dataTable var="notificacao" value="#{NotificacaoControle.notificacoes}" id="listaNotif"
                     emptyMessage="#{msg['tabela.semregistros']}"
                     rowStyleClass="#{notificacao.tipo.style}">
            <p:column headerText="Notificação">
                <p:commandLink style="#{telaAluno ? 'padding: 0px 0px 0px 0px; font-size: 12px; text-decoration: none;' : ''}"
                               action="#{NotificacaoControle.redirect(('/aluno/').concat(notificacao.cliente.codigo))}">
                    <h:graphicImage rendered="#{!telaAluno}" library="img"
                                    name="#{SuperControl.defineUrlFoto(SuperControl.usuario.chave, notificacao.cliente.codigoPessoa, false)}"/>
                    <h:outputText rendered="#{!telaAluno}" value="#{notificacao.cliente.nomeAbreviado} "/>
                    <h:outputText style="font-weight: bold" value="#{notificacao.nome}"/>
                    <ui:fragment rendered="#{notificacao.serieRealizada != null}">
                        <h:outputText value=" na atividade "/>
                        <h:outputText style="font-weight: bold"
                                      value="#{notificacao.serieRealizada.atividadeFicha.atividade.nome}"/>
                    </ui:fragment>
                    <ui:fragment rendered="#{notificacao.crm}">
                        <h:outputText style="font-weight: bold"
                                      value=" - "/>
                        <h:outputText style="font-weight: bold"
                                      title="#{notificacao.codigo}"
                                      value="#{notificacao.textoCRM}"/>
                        <h:outputText value=" #{notificacao.resposta}"/>
                    </ui:fragment>
                </p:commandLink>
            </p:column>
            <p:column headerText="Data">
                <p:commandLink action="#{NotificacaoControle.redirect(('/aluno/').concat(notificacao.cliente.codigo))}">
                    <h:outputText value="#{notificacao.dataRegistro}">
                        <f:convertDateTime timeZone="#{SuperControl.usuario.timeZone}" pattern="dd/MM HH:mm:ss"/>
                    </h:outputText>
                </p:commandLink>
            </p:column>
            <p:column>
                <h:panelGroup rendered="#{notificacao.pushEnviado}">
                    <i title="#{title['notificacao.push']}" class="fa-icon-asterisk"/>
                </h:panelGroup>
                <h:panelGroup rendered="#{notificacao.smsEnviado}">
                    <i title="#{title['notificacao.sms']}" class="fa-icon-envelope"/>
                </h:panelGroup>
            </p:column>
        </p:dataTable>
    </ui:fragment>
</ui:composition>